kind DocgenStringPrintNoEscape;
DocgenStringPrintNoEscape docinfo_se;

val I = 10;
differentiable_program{ 
    OblectamentaDataLabel y,f,h,b,omega,x, v;
    
        computation_graph{

                array(x,f64,base(0));//declares x as an array of f32 starting at address 0, the array size is deduced from the computation graph.
                array(b,f64,base(8*I));
                array(omega,f64,base(8*I + 4*8));
                array(l,f64,base(8*I + 4*8 + 4*8));
                array(y,f64,base(8*I + 4*8 + 4*8 + 4*8));

            for (i : 1 .. I ){
   

                f(0)= b(0) + omega(0) * x(i);
                h(1) = f(0) + sin(f(0));
                f(1) = b(1) + omega(1) * h(1); 
                h(2) = exp(f(1));
                f(2) = b(2) + omega(2)*h(2);
                h(3) = cos(f(2));
                f(3) = b(3) + omega(3) * h(3);
                l(i) = (f(3) - y(i))*(f(3) - y(i));
            }
        };
};

val the_asm_code = undef;

Scenario{
    OblectamentaDataLabel y,f,h,b,omega,x, v;
    

    title{label __ title = "Compile and Run Computation Graph";};
    Given{
        root.differentiable_program.computation_graph;
     };
    When{
         let the_asm_code = 
         operation(
          compile_diffprog{
            kind OblectamentaOption;
            OblectamentaOption listing, debug_info;
            options{
                listing;debug_info;
            };
            differentiable_program{
                OblectamentaDataLabel x;
                root.differentiable_program.computation_graph;
            };
          }
        );
     };
     "!!!!";the_asm_code;
     let the_vm = operation(
         run{
            vm{
                data{                    
                for(i : 1 .. 100) { 0.0; }

                };
                text{
                 the_asm_code;
                };
            }; 
          }
        );
    "!!!!!";the_vm;
    Then
    {
    verdict{
     };
    };
};



docinfo_se("==================================== SUMMARY ======================================
");

Summary{
 for( e : root.Scenario){
  e.title.content();e.Then.result.content();
 }
};